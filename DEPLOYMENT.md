# Deployment Guide for Render.com

This guide will help you deploy your Travel Planner Flask application to Render.com for free.

## ğŸ“‹ Prerequisites

Before deploying, you need:

1. **GitHub Account** - Your code must be on GitHub
2. **Render.com Account** - Sign up at https://render.com (free)
3. **API Keys** - Get these before deployment:
   - **GEMINI_API_KEY** - Get from https://makersuite.google.com/app/apikey
   - **OPENROUTER_API_KEY** - Get from https://openrouter.ai/keys

## ğŸš€ Step-by-Step Deployment

### Step 1: Push Code to GitHub

```bash
# Initialize git (if not already done)
git init

# Add all files
git add .

# Commit
git commit -m "Prepare for Render.com deployment"

# Add your GitHub repository as remote
git remote add origin https://github.com/YOUR-USERNAME/YOUR-REPO.git

# Push to GitHub
git push -u origin main
```

### Step 2: Deploy on Render.com

1. **Go to Render.com Dashboard**
   - Visit https://dashboard.render.com
   - Log in or sign up

2. **Connect Your GitHub Repository**
   - Click "New +" button
   - Select "Blueprint"
   - Click "Connect GitHub" if not already connected
   - Select your repository

3. **Render Will Detect `render.yaml`**
   - Render automatically reads the `render.yaml` file
   - It will create both:
     - Web Service (Flask app)
     - PostgreSQL Database (free for 90 days)

4. **Add Environment Variables**
   - After creating the service, go to "Environment"
   - Add these **required** variables:
     ```
     GEMINI_API_KEY=your-actual-gemini-key
     OPENROUTER_API_KEY=your-actual-openrouter-key
     ```
   - These variables are NOT in render.yaml for security (they're private)

5. **Deploy**
   - Render will automatically build and deploy your app
   - Build takes 5-10 minutes on first deploy
   - You'll see build logs in real-time

### Step 3: Access Your Application

Once deployed, Render will provide a URL like:
```
https://travel-planner-abc123.onrender.com
```

Your app is now live! ğŸ‰

## ğŸ”§ Configuration Details

### What's Included

- âœ… Flask application with Gunicorn server
- âœ… PostgreSQL database (free tier, 90 days)
- âœ… Automatic HTTPS/SSL
- âœ… Auto-deploy on git push
- âœ… Database migrations on each deploy
- âœ… Health checks

### Free Tier Limits

**Web Service:**
- 512 MB RAM
- Sleeps after 15 minutes of inactivity
- First request after sleep takes 30-50 seconds (cold start)
- 750 hours/month free (enough for 1 service running 24/7)

**Database:**
- 1 GB storage
- Free for 90 days, then $7/month
- Shared resources

## ğŸ“ Environment Variables Reference

### Required (Must Set in Render Dashboard)
```bash
GEMINI_API_KEY=your-key          # AI trip planning
OPENROUTER_API_KEY=your-key      # Alternative AI provider
```

### Auto-Generated by Render
```bash
SECRET_KEY=auto-generated         # Flask session security
DATABASE_URL=auto-generated       # PostgreSQL connection
FLASK_ENV=production             # Production mode
SESSION_COOKIE_SECURE=true       # HTTPS cookies
```

### Optional
```bash
MAIL_SERVER=smtp.gmail.com       # For password reset emails
MAIL_USERNAME=your@email.com
MAIL_PASSWORD=your-app-password
PUBLIC_GOOGLE_MAPS_KEY=key       # If using Google Maps
```

## ğŸ”„ Updating Your App

After initial deployment, updates are automatic:

```bash
# Make changes to your code
git add .
git commit -m "Your update message"
git push origin main
```

Render automatically:
1. Detects the push
2. Rebuilds your app
3. Runs database migrations
4. Deploys the new version
5. Zero-downtime deployment (users stay connected)

## ğŸ› Troubleshooting

### Build Fails

**Check build logs in Render dashboard:**
- Missing dependencies? Check `requirements.txt`
- Python version issue? Render uses Python 3.11 by default
- Database connection? DATABASE_URL is auto-set by Render

### App Not Loading

1. **Check service status** - Service should show "Live" (green)
2. **Check logs** - Click "Logs" to see errors
3. **Check environment variables** - Ensure GEMINI_API_KEY and OPENROUTER_API_KEY are set
4. **Check health endpoint** - Visit `https://your-app.onrender.com/` (should load homepage)

### Database Issues

1. **Migrations not running?**
   - Check build logs for migration errors
   - Manually run: `flask db upgrade` in Render shell

2. **Database connection failed?**
   - Ensure database service is running
   - Check DATABASE_URL is set correctly
   - Verify database and web service are in same region

### Cold Start (Slow First Load)

This is normal on free tier:
- App sleeps after 15 min inactivity
- First request wakes it up (30-50 seconds)
- Upgrade to paid plan ($7/month) for always-on

## ğŸ“Š Monitoring

### View Logs
```bash
# In Render Dashboard
Services â†’ Your Service â†’ Logs
```

### Health Check
Your app has a health check at `/` that Render pings every few minutes.

### Database Management

**Access database shell:**
1. Go to Database service in Render
2. Click "Connect"
3. Use provided connection string with any PostgreSQL client

**Backup database:**
1. Render automatically backs up free databases
2. For manual backup: Use `pg_dump` with connection string

## ğŸ” Security Best Practices

1. **Never commit .env file** - It's in .gitignore
2. **Use environment variables** - Set sensitive data in Render dashboard
3. **HTTPS is automatic** - Render provides SSL certificate
4. **Rotate API keys** - Change keys periodically
5. **Use strong SECRET_KEY** - Render auto-generates one

## ğŸ’° Cost Optimization

**Free Tier Strategy:**
- 1 Web Service (free)
- 1 PostgreSQL Database (free for 90 days)
- After 90 days: Migrate to external free PostgreSQL (see alternatives below)

**Free Database Alternatives (after 90 days):**
- [ElephantSQL](https://www.elephantsql.com/) - Free 20MB PostgreSQL
- [Supabase](https://supabase.com/) - Free 500MB PostgreSQL
- [Neon](https://neon.tech/) - Free 1GB PostgreSQL

## ğŸ†˜ Support

**Render Documentation:**
- https://render.com/docs

**Community Forum:**
- https://community.render.com

**Status Page:**
- https://status.render.com

## ğŸ¯ Next Steps

After deployment:

1. âœ… Test all features (login, signup, destinations, AI trip planning)
2. âœ… Set up custom domain (optional, $0 on Render)
3. âœ… Configure email service for password resets
4. âœ… Monitor logs for errors
5. âœ… Set up database backups
6. âœ… Share your app URL!

## ğŸ“± Custom Domain (Optional)

1. Go to your service settings
2. Click "Custom Domain"
3. Add your domain (e.g., `www.yourapp.com`)
4. Update DNS records as shown
5. Render provides free SSL for custom domains

---

**Your app is ready to go live! ğŸš€**

Questions? Check the [Render Docs](https://render.com/docs) or open an issue on GitHub.
